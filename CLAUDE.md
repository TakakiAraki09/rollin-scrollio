# Claude Code Rules for Rolling Scrollio

## プロジェクト概要
Rolling Scrollio は軽量なスクロール駆動アニメーションライブラリです。要素の可視性を追跡し、スムーズなスクロール進行値を提供します。

## 開発環境
- **言語**: TypeScript (strict mode)
- **ビルドツール**: tsup
- **パッケージマネージャー**: pnpm (10.9.0)
- **フォーマッター/リンター**: Biome
- **インデント**: タブ
- **引用符**: ダブルクォート

## 必須コマンド
コード変更後は必ず以下のコマンドを実行してください：
```bash
pnpm check  # フォーマット、リント、型チェックを一括実行
```

個別のコマンド：
- `pnpm format` - コードフォーマット
- `pnpm lint` - リントチェック
- `pnpm build` - ビルド

## コーディング規約

### 1. TypeScript
- strict modeを維持
- 型定義は明示的に記述
- anyの使用禁止
- インターフェースは`I`プレフィックスなし

### 2. ファイル構成
```
src/
├── index.ts          # メインエントリーポイント
├── index.scss        # スタイル定義
├── animations/       # アニメーション関連
└── utils/           # ユーティリティ関数
```

### 3. コードスタイル
- Biomeの設定に従う
- タブインデント
- ダブルクォート使用
- セミコロン必須
- コメントは最小限に

### 4. エクスポート規約
- デフォルトエクスポートを優先
- 型定義は名前付きエクスポート
- バレルエクスポート（index.ts）を活用

### 5. 変更時の注意点
- **新規ファイル作成は避ける** - 既存ファイルの編集を優先
- **ドキュメント作成禁止** - 明示的に要求されない限り*.mdファイルを作成しない
- **破壊的変更禁止** - 後方互換性を維持
- **依存関係の追加は慎重に** - 軽量性を維持

### 6. テスト
- 現在テストフレームワークは未設定
- 手動でdemoフォルダで動作確認

### 7. コミット前チェックリスト
1. `pnpm check`が成功すること
2. `pnpm build`が成功すること
3. demo/index.htmlで動作確認
4. 不要なコメントがないこと

## プロジェクト固有のルール

### CSS変数
- `--rolling-scrollio-progress`を自動設定
- -2から2の範囲で進行値を提供

### API設計
- シンプルで直感的なAPIを維持
- オプションはオブジェクト形式で受け取る
- destroyメソッドでクリーンアップ可能に

### パフォーマンス
- IntersectionObserverを活用
- 不要な再計算を避ける
- メモリリークに注意（イベントリスナーの適切な削除）